# ============================================================
# DS-Project — Ortam Değişkenleri
# ============================================================
# Kullanım:
#   cp .env.example .env
#   .env dosyasını düzenleyin (replace-me değerlerini değiştirin)
#   docker compose -f docker-compose.dev.yml up --build
# ============================================================

# ── Zorunlu ─────────────────────────────────────────────────

# API kimlik doğrulama anahtarı (isteklerde x-api-key header'ı)
DS_API_KEY=replace-me

# Admin dashboard şifresi — bcrypt hash KULLANIN (güvenli):
#   python -c "import bcrypt; print(bcrypt.hashpw(b'sifreniz', bcrypt.gensalt()).decode())"
# Düz metin da çalışır ama tehlikelidir:
DASHBOARD_ADMIN_PASSWORD_ADMIN=replace-me

# ── Veritabanı ───────────────────────────────────────────────

# PostgreSQL (Docker Compose içinde otomatik gelir)
# Eksikse SQLite kullanılır: sqlite:///./reports/dashboard.db
DATABASE_URL=postgresql+psycopg://ds_user:ds_password@localhost:5432/ds_dashboard

# ── Redis ────────────────────────────────────────────────────

# Redis (Docker Compose içinde otomatik gelir)
# Eksikse in-memory rate limiter kullanılır
REDIS_URL=redis://localhost:6379/0
RATE_LIMIT_BACKEND=redis

# ── API / CORS ───────────────────────────────────────────────

CORS_ALLOW_ORIGINS=http://localhost:5173,http://localhost:3000

# ── Dashboard auth ───────────────────────────────────────────

DASHBOARD_AUTH_ENABLED=true
# Ek salt-okunur kullanıcı (opsiyonel)
DASHBOARD_ADMIN_USERNAME=ds_readonly
DASHBOARD_ADMIN_PASSWORD=ChangeMeReadOnly123!
DASHBOARD_TOKEN_TTL_MINUTES=480
# Frontend URL (dashboard redirect için)
DASHBOARD_URL=http://localhost:5173

# ── AI Chat (Ollama) ─────────────────────────────────────────

# Ollama lokal çalışıyorsa bu şekilde ulaşılır
# Docker içinden host makineye: http://host.docker.internal:11434
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama3.2:3b
CHAT_SESSION_TTL_SECONDS=3600

# ── Gözlemlenebilirlik (OpenTelemetry) ───────────────────────

OTEL_ENABLED=false
OTEL_SERVICE_NAME=ds-project-api
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_DEPLOYMENT_ENV=development

# ── Alarm bildirimleri ───────────────────────────────────────

ALERT_WEBHOOK_URL=https://example.com/webhook
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/replace-me
PAGERDUTY_ROUTING_KEY=replace-me

# ── Ortam / Güvenlik ──────────────────────────────────────────

# DS_ENV: development | staging | production
# CRITICAL: Set to 'production' or 'staging' in non-local environments.
# When set, insecure dev credential fallbacks are disabled and a proper
# DASHBOARD_ADMIN_PASSWORD_ADMIN is required.
DS_ENV=development

# ── Loglama ──────────────────────────────────────────────────

LOG_FORMAT=json
PYTHONUNBUFFERED=1

# ── DVC Remote Storage ──────────────────────────────────────────────────────
# Local dev: MinIO runs in Docker Compose on port 9000.
# Production: point to real AWS S3, MinIO cluster, or another S3-compatible store.

# MinIO admin credentials (matches docker-compose.dev.yml defaults)
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin

# DVC S3-compatible remote — used by `dvc push` / `dvc pull` in CI & prod.
# For local dev with MinIO: set endpoint to http://localhost:9000
# For real AWS S3: leave DVC_S3_ENDPOINT_URL empty or unset.
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin
AWS_S3_ENDPOINT_URL=http://localhost:9000

# To use the production remote instead of MinIO, override these in CI secrets:
# AWS_ACCESS_KEY_ID=<your-aws-key>
# AWS_SECRET_ACCESS_KEY=<your-aws-secret>
# AWS_S3_ENDPOINT_URL=   (empty = real AWS S3)

# Google Cloud Storage remote (optional — requires dvc-gs)
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# Azure Blob Storage remote (optional — requires dvc-azure)
# AZURE_STORAGE_ACCOUNT=your-storage-account
# AZURE_STORAGE_KEY=your-storage-key
