name: load-test

on:
  workflow_dispatch:

jobs:
  k6-smoke:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Setup k6
        uses: grafana/setup-k6-action@v1
      - name: Run k6 smoke (requires reachable API)
        env:
          BASE_URL: ${{ secrets.LOADTEST_BASE_URL }}
          DS_API_KEY: ${{ secrets.DS_API_KEY }}
        run: |
          k6 run perf/k6_smoke.js
